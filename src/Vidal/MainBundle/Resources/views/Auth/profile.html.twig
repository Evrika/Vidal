{% extends 'VidalMainBundle::layout.html.twig' %}


{% block content %}
	<h1>РЕДАКТИРОВАНИЕ ПРОФИЛЯ</h1>

	{% if not user.emailConfirmed %}
		<div class="thanks">
			Для того чтобы получить доступ к функциям сайта осталось лишь подтвердить электронный адрес
		</div>
	{% endif %}

	{# извещения #}
	{% if app.session.flashBag.get('confirmed')|length %}
		<div class="thanks">Благодарим за регистрацию на нашем портале!</div>
	{% elseif app.session.flashBag.get('saved')|length %}
		<div class="thanks">Сохранено!</div>
	{% endif %}

	{# форма #}
	<form id="profile_form" action="{{ path('profile') }}" method="post" {{ form_enctype(form) }}>
		{% form_theme form 'VidalMainBundle:Form:profile_form.html.twig' %}
		{{ form_widget(form) }}
	</form>
{% endblock %}


{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" type="text/css" href="{{ asset('bundles/vidalmain/jquery-chosen/chosen.css') }}"/>
	<link rel="stylesheet" type="text/css" href="{{ asset('bundles/vidalmain/checkbox/checkbox.css') }}"/>
	<style type="text/css">
		.row_birthdate .chosen-container {
			width:        68px !important;
			margin-right: 15px;
		}
		#profile_birthdate_month_chosen {
			width: 100px !important;
		}
		.row_student .form_widget {
			user-select:         none;
			-moz-user-select:    none;
			-webkit-user-select: none;
			-ms-user-select:     none;
		}
		.form_table .form_label {
			overflow: hidden;
		}
		.form_table .no-selection {
			float:        right;
			font-size:    15px;
			color:        #999;
			font-style:   italic;
			margin-right: 10px;
		}
		.form_table .no-selection label {
			margin-right: 5px;
		}
		.form_table .form_button {
			padding-top:    10px !important;
			padding-bottom: 30px !important;
		}
		.form_table .row_avatar label {
			color: #666d75;
		}
		.form_table .input-upload {
			width: 200px !important;
		}
		.reset-avatar {
			margin-top:   15px;
			padding-left: 2px;
			font-weight:  bold;
			font-size:    15px;
		}
	</style>
{% endblock %}


{% block javascripts %}
	{{ parent() }}
	<script type="text/javascript" src="{{ asset('bundles/vidalmain/jquery-chosen/chosen.jquery.min.js') }}"></script>
	<script type="text/javascript" src="{{ asset('bundles/vidalmain/checkbox/jquery.checkbox.js') }}"></script>
	<script type="text/javascript"
			src="{{ asset('bundles/vidalmain/javascripts/jquery.customfile.js') }}"></script>
	<script>
		$(document).ready(function() {
			$("#profile_city").autocomplete({
				source:    Routing.generate('ajax_city'),
				minLength: 2,
				delay:     100,
				autoFocus: true,
				limit:     15
			});

			$("#profile_avatar_file").customFile();

			var $miniChoices = $('#profile_jobAlignment, #profile_jobType, #profile_academicDegree');
			$('#profile_form select').not($miniChoices).chosen({
				search_contains: true,
				no_results_text: "не найдено"
			});
			$($miniChoices).chosen({
				disable_search:  true,
				no_results_text: "не найдено"
			});

			$('#profile_form input[type="checkbox"]').checkbox();
		});
	</script>
{% endblock %}