$(document).ready(function(){var t={product:"препарат",molecule:"вещество",atc:"АТХ код",company:"компания"},e="all",i=$("#search_form .search-type");$("#search_form .search-query").autocomplete({minLength:2,source:function(t,n){e=i.val();var a='{ "query":{"query_string":{"query":"'+t.term+'*"}}, "fields":["name","type"], "size":40, "highlight":{"fields":{"name":{}}}';"all"!=e&&(a+=', "filter":{"term" :{"type" : "'+e+'"}}'),a+=" }",$.ajax({url:"http://www.vidal.ru:9200/website/autocomplete/_search",type:"POST",dataType:"JSON",data:a,success:function(t){var e=t.hits.hits,i=$.map(e,function(t){return{label:t.highlight&&t.highlight.name?t.highlight.name:"",value:t.fields.name,type:t.fields.type}});i.sort(function(t,e){return t.type==e.type?0:t.type<e.type?1:-1}),n(i.slice(0,15))}})},select:function(t,e){e.item&&(window.location=Routing.generate("search",{q:e.item.value[0]}))}}).data("ui-autocomplete")._renderItem=function(e,i){return $('<li class="aut"></li>').data("item.autocomplete",i).append("<a><i>"+t[i.type]+"</i>"+i.label+"</a>").appendTo(e)},$(".admin-edit").click(function(t){t.stopPropagation()}),$("#search_form .search-type").chosen({disable_search:!0}),$(window).scroll(function(){$(this).scrollTop()>100?$("#top-link").fadeIn():$("#top-link").fadeOut()}),$("#top-link").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$('a[href^="http"], a[href^="ftp"]').not('a[href^="http://vidal"]').click(function(){return window.open(this.href,""),!1}),$(".tags > span").click(function(t){t.stopPropagation();var e=$(this).find("> ul");$(".tags ul").not(e).hide(),e.toggle()}),$(".tags ul").mouseover(function(t){t.stopPropagation()}).click(function(t){t.stopPropagation()}),$("body").click(function(){$(".tags ul").hide()}),$(".anons-footer").click(function(){var t=$(this).toggleClass("expanded").closest(".announcement");t.find("ul").slideToggle("fast"),t.find(".products").slideToggle("fast")}),$(".text a").each(function(){var t=$(this),e=t.text(),i=this.href;if(e.length>70&&-1===e.indexOf(" ")){var n=e.split("/");e=n.join('<span style="display:inline-block;width:0"></span>/'),t.html(e)}var a=i.indexOf("#_");-1!==a&&(i=i.substring(a),this.href=i)}),$(".text a").click(function(){var t=this.getAttribute("href").substring(2);$("#"+t).closest(".spoiler-content").show()})});